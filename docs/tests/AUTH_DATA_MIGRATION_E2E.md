# 認証とデータ移行の E2E テストケース

## 1. 未ログイン状態での基本機能

### 1.1 書籍管理

- [x] 書籍を追加できること
- [x] 書籍の情報を編集できること
- [x] 書籍を削除できること
- [x] 追加した書籍がローカルストレージに保存されていること
- [?] オフライン状態でも書籍の操作が可能なこと

### 1.2 クリップ管理

- [x] 書籍にクリップを追加できること
- [x] クリップの内容を編集できること
- [x] クリップを削除できること
- [x] 追加したクリップがローカルストレージに保存されていること
- [?] オフライン状態でもクリップの操作が可能なこと

## 2. 会員登録時のデータ移行

### 2.1 ローカルデータが存在する場合

- [x] 会員登録時にデータ移行の確認ダイアログが表示されること
- [x] データ移行中にプログレスバーが表示されること
- [x] 全ての書籍データが Supabase に正しく移行されること
- [x] 全てのクリップデータが Supabase に正しく移行されること
- [x] 移行完了後にローカルデータが削除されること
- [x] 移行完了後に Supabase のデータが表示されること

### 2.2 ローカルデータが存在しない場合

- [x] 会員登録が正常に完了すること
- [x] データ移行の確認ダイアログが表示されないこと
- [x] Supabase ストレージに切り替わること

## 3. ログイン状態での機能

### 3.1 書籍管理

- [x] 書籍を追加できること
- [x] 書籍の情報を編集できること
- [x] 書籍を削除できること
- [x] 追加した書籍が Supabase に保存されていること
- [-] オフライン状態で書籍の追加・編集・削除が制限されること

### 3.2 クリップ管理

- [x] 書籍にクリップを追加できること
- [x] クリップの内容を編集できること
- [x] クリップを削除できること
- [x] 追加したクリップが Supabase に保存されていること
- [-] オフライン状態でクリップの追加・編集・削除が制限されること

## 4. ログアウト時の動作

### 4.1 基本動作

- [x] ログアウト時にローカルストレージに切り替わること
- [x] Supabase のキャッシュデータがクリアされること
- [x] ローカルストレージが空の状態になること

### 4.2 再ログイン

- [x] 再ログイン時に Supabase のデータが正しく表示されること
- [x] 以前追加したデータが全て表示されること

## 5. アカウント削除

### 5.1 基本動作

- [x] アカウント削除時に Supabase のデータが削除されること
- [x] ローカルストレージがクリアされること
- [x] 未ログイン状態に戻ること

